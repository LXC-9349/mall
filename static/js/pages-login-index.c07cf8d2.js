(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-login-index"],{"03e1":function(t,e,n){"use strict";n.r(e);var i=n("39fd"),a=n.n(i);for(var o in i)["default"].indexOf(o)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(o);e["default"]=a.a},"0553":function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return a})),n.d(e,"a",(function(){}));var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{staticClass:"t-login"},[n("v-uni-image",{staticClass:"img-a",attrs:{src:"/static/login/2.png"}}),n("v-uni-image",{staticClass:"img-b",attrs:{src:"/static/login/3.png"}}),n("v-uni-view",{staticClass:"t-b"},[t._v(t._s(t.title))]),n("v-uni-view",{staticClass:"t-b2"},[t._v("欢迎使用")]),n("v-uni-form",{staticClass:"cl"},[n("v-uni-view",{staticClass:"t-a"},[n("v-uni-image",{attrs:{src:"/static/login/sj.png"}}),n("v-uni-view",{staticClass:"line"}),n("v-uni-input",{attrs:{name:"account",placeholder:"请输入手机号或邮箱",maxlength:"50"},model:{value:t.account,callback:function(e){t.account=e},expression:"account"}})],1),t.codeLogin?n("v-uni-view",{staticClass:"t-a"},[n("v-uni-image",{attrs:{src:"/static/login/yz.png"}}),n("v-uni-view",{staticClass:"line"}),n("v-uni-input",{attrs:{type:"number",name:"code",maxlength:"6",placeholder:"请输入验证码"},model:{value:t.code,callback:function(e){t.code=e},expression:"code"}}),t.showText?n("v-uni-view",{staticClass:"t-c",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.getCode()}}},[t._v("发送验证码")]):n("v-uni-view",{staticClass:"t-c",staticStyle:{"background-color":"#A7A7A7"}},[t._v("重新发送("+t._s(t.second)+")")])],1):n("v-uni-view",{staticClass:"t-a"},[n("v-uni-image",{attrs:{src:"/static/login/yz.png"}}),n("v-uni-view",{staticClass:"line"}),n("v-uni-input",{attrs:{type:"password",name:"code",placeholder:"请输入密码"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1),n("v-uni-button",{on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.login()}}},[t._v("登 录")]),n("v-uni-view",{staticClass:"change"},[n("v-uni-text",{on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.changeLogin.apply(void 0,arguments)}}},[t._v(t._s(t.changeTxt))])],1)],1),n("v-uni-view",{staticClass:"t-f"},[n("v-uni-text",[t._v("————— 第三方账号登录 —————")])],1),n("v-uni-view",{staticClass:"t-e cl"},[n("v-uni-view",{staticClass:"t-g",attrs:{"data-loginType":"weixin"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.otherLogin.apply(void 0,arguments)}}},[n("v-uni-image",{attrs:{src:"/static/login/wx.png"}})],1),n("v-uni-view",{staticClass:"t-g",attrs:{"data-loginType":"qq"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.otherLogin.apply(void 0,arguments)}}},[n("v-uni-image",{attrs:{src:"/static/login/qq.png"}})],1)],1),n("v-uni-view",{staticClass:"toHome",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.onTargetIndex()}}},[t._v("通过游客访问")])],1)},a=[]},3349:function(t,e,n){"use strict";var i=n("a7e3"),a=n.n(i);a.a},"39fd":function(t,e,n){"use strict";(function(t){n("6a54");var i=n("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=i(n("2634")),o=i(n("2fdc")),r=i(n("4e62")),c=i(n("ead7")),s={components:{Simple:r.default,MpWeixin:c.default},data:function(){return{isLoad:!1,isMpWeixinAuth:!1,isParty:!1,partyData:{}}},onLoad:function(e){var n=this;return(0,o.default)((0,a.default)().mark((function e(){return(0,a.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.log("login onLoad"),e.next=3,n.setShowUserInfo();case 3:n.isLoad=!0,t.log("isLoad",!0);case 5:case"end":return e.stop()}}),e)})))()},methods:{setShowUserInfo:function(){var t=this;return(0,o.default)((0,a.default)().mark((function e(){var n,i;return(0,a.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=t,i="MP-WEIXIN"===n.platform&&wx.canIUse("getUserProfile"),n.isMpWeixinAuth=i;case 3:case"end":return e.stop()}}),e)})))()},onGetUserInfoSuccess:function(t){var e=t.oauth,n=t.code,i=t.userInfo;this.partyData={oauth:e,code:n,userInfo:i},this.onShowRegister()},onShowRegister:function(){this.isMpWeixinAuth=!1,this.isParty=!0}}};e.default=s}).call(this,n("ba7c")["default"])},"460c":function(t,e,n){"use strict";n.r(e);var i=n("4f63"),a=n.n(i);for(var o in i)["default"].indexOf(o)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(o);e["default"]=a.a},"4e62":function(t,e,n){"use strict";n.r(e);var i=n("0553"),a=n("b2f4");for(var o in a)["default"].indexOf(o)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(o);n("5bf7");var r=n("828b"),c=Object(r["a"])(a["default"],i["b"],i["c"],!1,null,"76d3826c",null,!1,i["a"],void 0);e["default"]=c.exports},"4f63":function(t,e,n){"use strict";(function(t){n("6a54");var i=n("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=i(n("2634")),o=i(n("2fdc"));n("bf0f"),n("d4b5"),n("64aa");var r=i(n("2a60")),c=n("4df0"),s={data:function(){return{storeInfo:void 0,code:""}},created:function(){this.getStoreInfo()},methods:{getStoreInfo:function(){},getCode:function(){return new Promise((function(e,n){uni.login({provider:"weixin",success:function(n){t.log("code",n.code),e(n.code)},fail:n})}))},getUserProfile:function(){var e=this;wx.canIUse("getUserProfile")&&wx.getUserProfile({lang:"zh_CN",desc:"获取用户相关信息",success:function(n){t.log("用户同意了授权"),t.log("userInfo：",n.userInfo),e.onAuthSuccess(n.userInfo)},fail:function(){t.log("用户拒绝了授权")}})},onAuthSuccess:function(t){var e=this;return(0,o.default)((0,a.default)().mark((function n(){var i;return(0,a.default)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return i=e,n.t0=r.default,n.t1=JSON.stringify(t),n.next=5,i.getCode();case 5:n.t2=n.sent,n.t3={userData:n.t1,code:n.t2},n.t0.dispatch.call(n.t0,"LoginMpWx",n.t3).then((function(t){r.default.dispatch("GetInfo").then((function(t){i.$toast("登录成功"),uni.$emit("syncRefresh",!0),setTimeout((function(){return i.onNavigateBack()}),2e3)}))})).catch((function(e){var n=e.result.data;(0,c.isEmpty)(n)&&i.$toast(e.result.message),n.isBack&&setTimeout((function(){return i.onNavigateBack(1)}),2e3),n.isBindMobile&&i.onEmitSuccess(t)}));case 8:case"end":return n.stop()}}),n)})))()},onEmitSuccess:function(t){var e=this;return(0,o.default)((0,a.default)().mark((function n(){var i;return(0,a.default)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return i=e,n.t0=i,n.next=4,i.getCode();case 4:n.t1=n.sent,n.t2=t,n.t3={oauth:"MP-WEIXIN",code:n.t1,userInfo:n.t2},n.t0.$emit.call(n.t0,"success",n.t3);case 8:case"end":return n.stop()}}),n)})))()},handleCancel:function(){this.onNavigateBack()},onNavigateBack:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=getCurrentPages();e.length>1?uni.navigateBack({delta:Number(t||1)}):this.$navTo("pages/index/index")}}};e.default=s}).call(this,n("ba7c")["default"])},"5bf7":function(t,e,n){"use strict";var i=n("6e60"),a=n.n(i);a.a},"5edc":function(t,e,n){var i=n("c86c");e=i(!1),e.push([t.i,'.img-a[data-v-76d3826c]{position:absolute;width:100%;top:%?-150?%;right:0}.img-b[data-v-76d3826c]{position:absolute;width:50%;bottom:0;left:%?-50?%\r\n  /* margin-bottom: -200rpx; */}.t-login[data-v-76d3826c]{width:%?650?%;margin:0 auto;font-size:%?28?%;color:#000}.t-login uni-button[data-v-76d3826c]{font-size:%?28?%;background-image:linear-gradient(330deg,#f9cdf9,#c5e7e7 50%,#fffff4);color:#5c1a1a;height:%?90?%;font-weight:700;line-height:%?90?%;border-radius:%?50?%;box-shadow:0 5px 7px 0 rgba(86,119,252,.2)}.t-login uni-input[data-v-76d3826c]{padding:0 %?20?% 0 %?120?%;height:%?90?%;line-height:%?90?%;margin-bottom:%?50?%;background:#f8f7fc;border:1px solid #e9e9e9;font-size:%?28?%;border-radius:%?50?%}.t-login .t-a[data-v-76d3826c]{position:relative}.t-login .t-a uni-image[data-v-76d3826c]{width:%?40?%;height:%?40?%;position:absolute;left:%?40?%;top:%?28?%;\r\n  /* border-right: 2rpx solid #dedede; */margin-right:%?20?%}.t-login .t-a .line[data-v-76d3826c]{width:%?2?%;height:%?40?%;background-color:#dedede;position:absolute;top:%?28?%;left:%?98?%}.t-login .t-b[data-v-76d3826c]{text-align:left;font-size:%?46?%;color:#000;padding:%?300?% 0 %?30?% 0;font-weight:700}.t-login .t-b2[data-v-76d3826c]{text-align:left;font-size:%?32?%;color:#aaa;padding:%?0?% 0 %?120?% 0}.t-login .t-c[data-v-76d3826c]{position:absolute;right:%?22?%;top:%?22?%;background-image:linear-gradient(1deg,#f9cdf9,#c5e7e7 50%,#fffff4);color:#286237;font-size:%?24?%;border-radius:%?50?%;height:%?50?%;line-height:%?50?%;padding:0 %?25?%}.t-login .t-d[data-v-76d3826c]{text-align:center;color:#999;margin:%?80?% 0}.t-login .t-e[data-v-76d3826c]{text-align:center;width:%?250?%;margin:%?80?% auto 0}.t-login .t-g[data-v-76d3826c]{float:left;width:50%}.t-login .t-e uni-image[data-v-76d3826c]{width:%?50?%;height:%?50?%}.t-login .change[data-v-76d3826c]{text-align:center;margin:%?20?% 0 0 0;color:#666;z-index:9999;position:relative}.t-login .t-f[data-v-76d3826c]{text-align:center;margin:%?150?% 0 0 0;color:#666;z-index:9999;position:relative}.t-login .t-f uni-text[data-v-76d3826c]{margin-left:%?20?%;color:#aaa;font-size:%?27?%}.t-login .uni-input-placeholder[data-v-76d3826c]{color:#000}.cl[data-v-76d3826c]{zoom:1}.cl[data-v-76d3826c]:after{clear:both;display:block;visibility:hidden;height:0;content:"\\20"}.toHome[data-v-76d3826c]{padding:%?10?%;text-align:center;font-weight:700;color:#054f5b;background-image:linear-gradient(1deg,#f9cdf9,#c5e7e7 50%,#fffff4);margin-top:%?30?%;position:relative;border-radius:%?50?%}',""]),t.exports=e},"62e7":function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return a})),n.d(e,"a",(function(){}));var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.isLoad?n("v-uni-view",{staticClass:"login container"},[t.isMpWeixinAuth?n("MpWeixin",{on:{success:function(e){arguments[0]=e=t.$handleEvent(e),t.onGetUserInfoSuccess.apply(void 0,arguments)}}}):n("Simple",{attrs:{isParty:t.isParty,partyData:t.partyData}})],1):t._e()},a=[]},"6e60":function(t,e,n){var i=n("5edc");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var a=n("967d").default;a("84888e9e",i,!0,{sourceMap:!1,shadowMode:!1})},8786:function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return a})),n.d(e,"a",(function(){}));var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{staticClass:"container"},[n("uni-status-bar"),n("v-uni-view",{staticClass:"wechatapp"},[n("v-uni-view",{staticClass:"header"},[n("v-uni-image",{staticClass:"image",attrs:{src:t.storeInfo&&t.storeInfo.image_url?t.storeInfo.image_url:"/static/default-avatar.png"}})],1)],1),n("v-uni-view",{staticClass:"auth-title"},[t._v("申请获取以下权限")]),n("v-uni-view",{staticClass:"auth-subtitle"},[t._v("获得你的公开信息（昵称、头像等）")]),n("v-uni-view",{staticClass:"login-btn"},[n("v-uni-button",{staticClass:"button btn-normal",on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.getUserProfile.apply(void 0,arguments)}}},[t._v("授权登录")])],1),n("v-uni-view",{staticClass:"no-login-btn"},[n("v-uni-button",{staticClass:"button btn-normal",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.handleCancel.apply(void 0,arguments)}}},[t._v("暂不登录")])],1)],1)},a=[]},a7e3:function(t,e,n){var i=n("bbbe");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var a=n("967d").default;a("6d3dc0de",i,!0,{sourceMap:!1,shadowMode:!1})},b2f4:function(t,e,n){"use strict";n.r(e);var i=n("d895"),a=n.n(i);for(var o in i)["default"].indexOf(o)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(o);e["default"]=a.a},bbbe:function(t,e,n){var i=n("c86c");e=i(!1),e.push([t.i,'@charset "UTF-8";\r\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\r\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\r\n/* 颜色变量 */\r\n/* 行为相关颜色 */\r\n/* 文字基本颜色 */\r\n/* 背景颜色 */\r\n/* 边框颜色 */\r\n/* 尺寸变量 */\r\n/* 文字尺寸 */\r\n/* 图片尺寸 */\r\n/* Border Radius */\r\n/* 水平间距 */\r\n/* 垂直间距 */\r\n/* 透明度 */\r\n/* 文章场景相关 */\r\n/* 引入uView全局scss变量文件 */.container[data-v-7bd0ae92]{padding:0 %?60?%;font-size:%?32?%;background:#f5f9f6;min-height:100vh}.wechatapp[data-v-7bd0ae92]{padding:%?80?% 0 %?48?%;border-bottom:%?1?% solid #e3e3e3;margin-bottom:%?72?%;text-align:center}.wechatapp .header[data-v-7bd0ae92]{width:%?190?%;height:%?190?%;border:%?4?% solid #f5f9f6;margin:0 auto 0;border-radius:50%;overflow:hidden;box-shadow:%?2?% 0 %?10?% rgba(50,50,50,.3)}.wechatapp .header .image[data-v-7bd0ae92]{display:block;width:100%;height:100%}.auth-title[data-v-7bd0ae92]{color:#585858;font-size:%?34?%;margin-bottom:%?40?%}.auth-subtitle[data-v-7bd0ae92]{color:#888;margin-bottom:%?88?%;font-size:%?28?%}.login-btn[data-v-7bd0ae92]{padding:0 %?20?%}.login-btn .button[data-v-7bd0ae92]{height:%?88?%;background:#04be01;color:#f5f9f6;font-size:%?30?%;border-radius:%?999?%;display:flex;justify-content:center;align-items:center}.no-login-btn[data-v-7bd0ae92]{margin-top:%?20?%;padding:0 %?20?%}.no-login-btn .button[data-v-7bd0ae92]{height:%?88?%;background:#dfdfdf;color:#f5f9f6;font-size:%?30?%;border-radius:%?999?%;display:flex;justify-content:center;align-items:center}',""]),t.exports=e},c5a5:function(t,e,n){"use strict";n("6a54"),Object.defineProperty(e,"__esModule",{value:!0}),e.isPositiveInteger=e.isPhone=e.isNumber=e.isMobile=e.isInteger=e.isEmpty=e.isEmail=e.isDouble=void 0,n("0c26"),n("5c47"),n("0506"),n("2c10");e.isEmpty=function(t){return""==t.trim()};e.isPhone=function(t){return/^((0\d{2,3}-\d{7,8})|(1[3456789]\d{9}))$/.test(t)};e.isMobile=function(t){return/^(1[3456789]\d{9})$/.test(t)};e.isEmail=function(t){if(null==t||""==t)return!1;var e=t.match(/^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/);return null!=e};e.isNumber=function(t){return!(!a(t)&&!i(t))};e.isPositiveInteger=function(t){return/(^[0-9]\d*$)/.test(t)};var i=function(t){if(null==t||""==t)return!1;var e=t.match(/^[-\+]?\d+$/);return null!=e};e.isInteger=i;var a=function(t){if(null==t||""==t)return!1;var e=t.match(/^[-\+]?\d+(\.\d+)?$/);return null!=e};e.isDouble=a},cf5b:function(t,e,n){"use strict";n("6a54");var i=n("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.emailSendCode=c,e.sendCode=function(t,e){return"sms"===t?r(e):c(e)},e.smsSendCode=r;var a=i(n("48f3")),o={smsSendCode:"/work_msg/sms/send_login",emailSendCode:"/work_msg/email/send_code"};function r(t){return a.default.get(o.smsSendCode,{phone:t})}function c(t){return a.default.get(o.emailSendCode,{address:t})}},d5cd:function(t,e,n){"use strict";n.r(e);var i=n("62e7"),a=n("03e1");for(var o in a)["default"].indexOf(o)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(o);var r=n("828b"),c=Object(r["a"])(a["default"],i["b"],i["c"],!1,null,"a2bfa9bc",null,!1,i["a"],void 0);e["default"]=c.exports},d895:function(t,e,n){"use strict";(function(t){n("6a54");var i=n("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,n("bf0f"),n("d4b5"),n("64aa");var a=i(n("81ff")),o=n("c5a5"),r=n("cf5b"),c=i(n("2a60")),s={data:function(){return{title:"欢迎回来！",second:60,showText:!0,account:"",code:"",password:"",codeLogin:!0,changeTxt:"账号密码登录"}},onLoad:function(){},methods:{changeLogin:function(){this.codeLogin?(this.codeLogin=!1,this.changeTxt="验证码登录"):(this.codeLogin=!0,this.code=null,this.changeTxt="账号密码登录")},onTargetIndex:function(){this.$navTo("pages/index/index")},login:function(){var t=this;if(t.account){var e="";if(!t.codeLogin||(0,o.isMobile)(t.account)||(0,o.isEmail)(t.account)){if((0,o.isEmail)(t.account)&&(e="email"),t.codeLogin){if(!t.code)return void a.default.alert("请输入验证码")}else if(this.code=null,!t.password)return void a.default.alert("请输入密码");a.default.loading(),c.default.dispatch("Login",{code:t.code,password:t.password,account:t.account,type:e}).then((function(e){uni.$emit("syncRefresh",!0),t.onNavigateBack(1)})).catch((function(t){})).finally((function(){return a.default.loaded()}))}else a.default.alert("请输入正确的账号信息")}else a.default.alert("请输入账号信息")},getCode:function(){var t=this;if(t.account){var e=(0,o.isMobile)(t.account)?"sms":"email";"sms"!==e?(0,o.isMobile)(t.account)||(0,o.isEmail)(t.account)?(0,r.sendCode)(e,t.account).then((function(e){a.default.alert("验证码发送成功");var n=setInterval((function(){t.showText=!1;var e=t.second-1;t.second=e<10?"0"+e:e}),1e3);setTimeout((function(){clearInterval(n),t.second=60,t.showText=!0}),6e4)})):a.default.alert("请输入正确的账号信息"):a.default.alert("发送短信未开通")}else a.default.alert("请输入手机号")},otherLogin:function(e){var n=e.currentTarget.dataset.logintype,i=uni.getSystemInfoSync().uniPlatform;"web"===i?a.default.alert("暂未开通"):uni.login({provider:n,success:function(e){uni.getUserInfo({provider:n,success:function(e){t.log(JSON.stringify(e.userInfo));var i=info.userInfo;"weixin"===n?(i.nickName,i.avatarUrl,i.openId):"qq"===n&&(i.nickname,i.figureurl_qq_2,i.openId)}})}})},onNavigateBack:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;c.default.dispatch("GetInfo").then((function(n){var i=getCurrentPages();i.length>1?uni.navigateBack({delta:Number(e||1)}):t.$navTo("pages/index/index")}))}}};e.default=s}).call(this,n("ba7c")["default"])},ead7:function(t,e,n){"use strict";n.r(e);var i=n("8786"),a=n("460c");for(var o in a)["default"].indexOf(o)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(o);n("3349");var r=n("828b"),c=Object(r["a"])(a["default"],i["b"],i["c"],!1,null,"7bd0ae92",null,!1,i["a"],void 0);e["default"]=c.exports}}]);